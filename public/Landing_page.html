<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>23BTM060 - Project Manager</title>
  <link rel="stylesheet" href="styles\global.css">
  <style>
    /* Page-specific styles */
    #heading {
      font-size: 2.5rem;
      color: var(--accent-color);
      margin-bottom: 1rem;
    }

    #maincontent p {
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
      color: #cccccc;
      line-height: 1.6;
    }

    #temp {
      display: flex;
      justify-content: space-around;
      align-items: center;
      flex-wrap: wrap;
      gap: 2rem;
    }

    .section {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 2rem 1rem;
    }

    .section p {
      font-size: 1.1rem;
      color: #cccccc;
      max-width: 600px;
      line-height: 1.6;
    }

    @media (max-width: 600px) {
      #temp {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>

  <!-- Extracted from global.css -->
  <style>
    .section {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      padding: 2rem 1rem;
    }
    .section-heading {
      font-size: 2rem;
      color: var(--accent-color);
      margin-bottom: 1rem;
    }
    .section p {
      font-size: 1.1rem;
      color: var(--secondary-color);
      max-width: 600px;
      line-height: 1.6;
    }
  </style>
</head>

<body>
  <nav>
    <a href="Landing_page.html"><img src="https://placehold.co/70x35" alt="Logo" /></a>
    <button class="nav-toggle" aria-label="Open navigation menu">
      <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 15.5A3.5 3.5 0 1 0 12 8.5a3.5 3.5 0 0 0 0 7zm7.43-2.06c.04-.3.07-.61.07-.94s-.03-.64-.07-.94l2.11-1.65a.5.5 0 0 0 .12-.64l-2-3.46a.5.5 0 0 0-.6-.22l-2.49 1a7.03 7.03 0 0 0-1.63-.94l-.38-2.65A.5.5 0 0 0 13 2h-4a.5.5 0 0 0-.5.42l-.38 2.65c-.6.23-1.17.54-1.7.9l-2.49-1a.5.5 0 0 0-.6.22l-2 3.46a.5.5 0 0 0 .12.64l2.11 1.65c-.04.3-.07.61-.07.94s.03.64.07.94l-2.11 1.65a.5.5 0 0 0-.12.64l2 3.46a.5.5 0 0 0 .6.22l2.49-1c.51.36 1.06.67 1.63.94l.38 2.65A.5.5 0 0 0 9 22h4a.5.5 0 0 0 .5-.42l.38-2.65c.6-.23 1.17-.54 1.7-.9l2.49 1a.5.5 0 0 0 .6-.22l2-3.46a.5.5 0 0 0-.12-.64l-2.11-1.65z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <ul>
      <li><a href="Landing_page.html">Home</a></li>
      <li><a href="Dashboard.html">Dashboard</a></li>
      <li><a href="reviews.html">Reviews</a></li>
      <li><a href="about.html">About Us</a></li>
    </ul>
  </nav>

  <div id="maincontent">
    <div id="temp">
      <div>
        <h1 id="heading">Manage Your Projects Easily</h1>
        <p>Automate your daily tasks and manage them as projects to boost your productivity. Stay organized, stay ahead.
        </p>
      </div>
      <div id="Logo">
        <img src="https://placehold.co/300x200" alt="Project Logo" />
      </div>
    </div>
  </div>

  <div class="section">
    <h2 class="section-heading">Built For Individuals and Modern Teams</h2>
    <p>Whether you're a solo freelancer or part of a high-functioning team, our tool adapts to your workflow seamlessly.
    </p>
  </div>

  <div class="section">
    <p>Start Your WorkSync Journey today by signing up for our services</p>
    <div class="form-bar-container">
      <form id="signupBar" class="form-bar">
        <h2>Sign Up</h2>
        <div class="input-group">
          <label for="UserName">Username:</label>
          <input type="text" id="UserName" name="UserName" required />
        </div>
        <div class="input-group">
          <label for="Password">Password:</label>
          <input type="password" id="Password" name="Password" required />
        </div>
        <div class="input-group">
          <label for="ConfirmPassword">Confirm Password:</label>
          <input type="password" id="ConfirmPassword" name="ConfirmPassword" required />
        </div>
        <button type="submit">Register</button>
      </form>
      <form id="loginBar" class="form-bar">
        <h2>Login</h2>
        <div class="input-group">
          <label for="LoginUserName">Username:</label>
          <input type="text" id="LoginUserName" name="LoginUserName" required />
        </div>
        <div class="input-group">
          <label for="LoginPassword">Password:</label>
          <input type="password" id="LoginPassword" name="LoginPassword" required />
        </div>
        <button type="submit">Login</button>
      </form>
    </div>
  </div>
  

    <script>
      // Hamburger menu toggle
      const navToggle = document.querySelector('.nav-toggle');
      const navUl = document.querySelector('nav ul');
      navToggle.addEventListener('click', function () {
        navUl.classList.toggle('nav-open');
        navToggle.classList.toggle('open');
      });

      // Store login state in localStorage
      function setLoggedIn(username) {
        localStorage.setItem('loggedInUser', username);
      }
      function logout() {
        localStorage.removeItem('loggedInUser');
        window.location.href = 'Landing_page.html';
      }

      // Show logout button if logged in
      function showLogout() {
        if (localStorage.getItem('loggedInUser')) {
          if (!document.getElementById('logoutBtn')) {
            const btn = document.createElement('button');
            btn.id = 'logoutBtn';
            btn.textContent = 'Logout';
            btn.style.marginLeft = '1rem';
            btn.onclick = logout;
            document.querySelector('nav').appendChild(btn);
          }
        }
      }
      showLogout();

      // Signup form handler
      document.getElementById('signupBar').addEventListener('submit', async function (e) {
        e.preventDefault();

        const UserName = document.getElementById('UserName').value.trim();
        const Password = document.getElementById('Password').value;
        const ConfirmPassword = document.getElementById('ConfirmPassword').value;

        if (Password !== ConfirmPassword) {
          alert('Passwords do not match!');
          return;
        }

        if (!UserName || !Password) {
          alert('Please fill all fields.');
          return;
        }

        try {
          const res = await fetch('/api/register', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ UserName, Password }),
          });

          const msg = await res.text();
          if (res.ok) {
            alert(msg);
            document.getElementById('signupBar').reset();
          } else {
            alert(msg);
          }
        } catch (err) {
          alert('Server error. Please try again later.');
        }
      });

      // Login form handler
      document.getElementById('loginBar').addEventListener('submit', async function (e) {
        e.preventDefault();

        const LoginUserName = document.getElementById('LoginUserName').value.trim();
        const LoginPassword = document.getElementById('LoginPassword').value;

        if (!LoginUserName || !LoginPassword) {
          alert('Please fill all fields.');
          return;
        }

        try {
          const res = await fetch('/api/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ UserName: LoginUserName, Password: LoginPassword }),
          });

          const msg = await res.text();
          if (res.ok) {
            setLoggedIn(LoginUserName);
            window.location.href = 'Dashboard.html';
          } else {
            alert(msg);
          }
        } catch (err) {
          alert('Server error. Please try again later.');
        }
      });
    </script>
</body>

</html>